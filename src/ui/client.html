<html ng-app="dellCoinClient">
<head>
    <title>DellCoin Client</title>

    <!--Подключение необходимых файлов-->

    <script src="libs/js/angular.js"></script>
    <script src="libs/js/jquery-1.11.1.min.js"></script>
    <script src="libs/js/bootstrap.min.js"></script>
    <link href="libs/styles/bootstrap.min.css" rel="stylesheet"/>

    <script src="libs/js/web3.min.js"></script>
    <script src="libs/js/client.js"></script>

    <style>

        /*form {*/
        /**/
        /*width: 800px;*/
        /*margin: 100px auto;*/
        /*border: 1px solid grey;*/
        /*padding: 20px;*/
        /**/
        /*}*/

    </style>

    <script>

       // var web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
       // var coinbase = web3.eth.coinbase;
       // var balance = web3.eth.getBalance(coinbase);
       // console.log(web3);
       //
       // if(!web3.isConnected)
       //     console.log("not connected");
       // else
       //     console.log("connected");
       // console.log("balance: " + balance);
    </script>

</head>
<body ng-controller="defaultCtrl">




<form ng-init="init()">
    <div class="panel">

        <div class="form-group">
            
            <div class="panel panel-primary">

                <div class="panel panel-heading">Peers</div>

                <div class="panel panel-body">

                    <table class="table table-striped"  width="100%">
                        <thead>
                        <tr>
                            <th>Address</th>
                        </tr>
                        </thead>


                        <tbody>
                        <tr ng-repeat="p in peers">
                            <td>{{p.address}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>

            </div>


            <div class="panel panel-primary">

                <div class="panel panel-heading">Local Files</div>

                <div class="panel panel-body">

                    <table class="table table-striped" ng-show="clientFiles.length > 0" width="100%">
                        <thead>
                        <tr>
                            <th>Content</th>
                            <th>Hash</th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                        </tr>
                        </thead>


                        <tbody>
                        <tr ng-repeat="clientFile in clientFiles">
                            <td>{{clientFile.content}}</td>
                            <td>{{clientFile.hash.substr(0,7)}}</td>

                            <td>
                                <button type="button" class="btn btn-primary btn-xs" ng-click="uploadFile(clientFile)" ng-disabled="clientFile.content === '------------- wiped -------------'">Upload</button>
                            </td>
                            <td>
                                <button type="button" class="btn btn-primary btn-xs" ng-click="verifyFile(clientFile)">Verify</button>
                            </td>
                            <td>
                                <button type="button" class="btn btn-primary btn-xs" ng-click="downloadFile(clientFile)">Download</button>
                            </td>
                            <td>
                                <button type="button" class="btn btn-primary btn-xs" ng-click="decodeFile(clientFile)">Decode</button>
                            </td>
                            <td>
                                <button type="button" class="btn btn-warning btn-xs" ng-click="deleteFile(clientFile)">Delete</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <!--<label for="fileContent">File Content:</label>-->
                    <div class="input-group mb-3">
                        <input class="form-control" ng-model="fileContent" id="fileContent">
                        <div class="input-group-btn">
                            <button type="button" class="btn btn-outline-secondary" ng-click="addFile()"
                                    ng-disabled="fileContent.length <= 0">Add File</button>
                        </div>
                    </div>

                </div>

            </div>

            <div class="panel panel-primary">

                <div class="panel panel-heading">Server Files</div>

                <div class="panel panel-body">

                    <table class="table table-striped" ng-show="serverFiles.length > 0" width="100%">
                        <thead>
                        <tr>
                            <th>Content</th>
                            <th>Hash</th>
                            <th></th>
                        </tr>
                        </thead>


                        <tbody>
                        <tr ng-repeat="serverFile in serverFiles">
                            <td>{{serverFile.content}}</td>
                            <td>{{serverFile.hash.substr(0, 7)}}</td>

                            <td>
                                <button type="button" class="btn btn-warning btn-xs" ng-click="deleteServerFile(serverFile)">Delete</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                </div>

            </div>

        </div>

    </div>
</form>

</body>
</html>
